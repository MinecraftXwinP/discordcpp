language: cpp

matrix:
  include:
  - os: linux
    compiler: gcc
    addons:
      apt:
        sources: ['ubuntu-toolchain-r-test']
        packages:
        - g++-4.9
        - libboost-all-dev
        - cmake
  - os: linux
    compiler: clang
    addons:
      apt:
        sources: ['ubuntu-toolchain-r-test']
        packages:
        - g++-4.9
        - libboost-all-dev
        - cmake
  - os: osx
    osx_image: xcode9

  - os: osx
    osx_image: xcode9.1

  - os: osx
    osx_image: xcode9.2

  - os: osx
    osx_image: xcode9.3
  - os: osx
    os_image: xcode10
install:
  - |
    if [[ (-x $(which brew)) ]]; then
      brew update
      brew install cmake boost
      brew upgrade cmake
      cmake --version
    else
      # install cmake 
      pushd /tmp/cmake
      wget https://cmake.org/files/v3.12/cmake-3.12.0-rc2.tar.gz
      tar -xf cmake-3.12.0-rc2.tar.gz
      pushd cmake-3.12.0-rc2
      ./bootstrap
      make
      popd -2
    fi
script:
  - mkdir build
  - cd build && cmake ..
  - make
  - ./test/unit_test